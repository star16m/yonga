<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org"
  th:replace="~{fragments/layout :: layout (~{::body},'product')}">

<body>
	<div th:if="${product != null}" class="container xd-container">
		<h2>상품</h2>
		<table class="table table-striped table-bordered" th:object="${product}">
			<tr>
				<th class="text-center">카테고리</th>
				<td><b th:text="*{category.korean + '(' + category.japanese + ')'}"></b></td>
			</tr>
			<tr>
				<th class="text-center">접수번호</th>
				<td><b th:text="*{uketsukeNo}"></b></td>
			</tr>
			<tr>
				<th class="text-center">세리순</th>
				<td><b th:text="*{seriBng}"></b></td>
			</tr>
			<tr>
				<th class="text-center">메이커</th>
				<td th:text="*{maker}" /></td>
			</tr>
			<tr>
				<th class="text-center">타입</th>
				<td th:text="*{type}" /></td>
			</tr>
			<tr>
				<th class="text-center">상품명</th>
				<td th:utext="*{itemName}" /></td>
			</tr>
			<tr>
				<th class="text-center">평가</th>
				<td th:text="*{rating}" /></td>
			</tr>
			<tr>
				<th class="text-center">형상</th>
				<td th:text="*{keijo}" /></td>
			</tr>
			<tr>
				<th class="text-center">개최횟수</th>
				<td th:text="*{openCount}" /></td>
			</tr>
			<tr>
				<th class="text-center">개최일</th>
				<td th:text="*{openDate}" /></td>
			</tr>
			<tr>
				<th class="text-center media-middle">특이사항</th>
				<td th:utext="${#strings.replace(product.note,', ','&lt;br&gt;')}" /></td>
			</tr>
			<tr>
				<th class="text-center media-middle">SalesPoint</th>
				<td th:utext="${#strings.replace(product.salesPoint,', ','&lt;br&gt;')}" /></td>
			</tr>
			<tr>
				<th class="text-center media-middle">SalesPoint2</th>
				<td th:utext="${#strings.replace(product.salesPoint2,', ','&lt;br&gt;')}" /></td>
			</tr>
			<tr>
				<th class="text-center media-middle">부속품</th>
				<td th:utext="${#strings.replace(product.accessories,', ','&lt;br&gt;')}" /></td>
			</tr>
			<tr>
				<th class="text-center">시작</th>
				<td th:text="*{start}" /></td>
			</tr>
			<tr>
				<th class="text-center">결과</th>
				<td th:text="*{result}" /></td>
			</tr>
		</table>
		<br />
		<h2>image</h2>
		<div>
			<div class="product-image" th:each="productImg : ${product.imageList}">
				<a th:href="${productImg.largeName}">
					<img th:src="${productImg.name}" />
				</a>
			</div>
		</div>
		<br />
	</div>
	
	<th:block th:if="${page == null || currentCategory == null}">
		<h2>Category</h2>
		<table id="category" class="table table-striped">
			<thead>
				<tr>
					<th>카테고리</th>
					<th>진행</th>
					<th>상태</th>
					<th>추출일시</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="category : ${categoryList}">
					<td class="text-center">
						<a th:href="@{/product/__${category.id}__}" th:text="${category.korean + ' (' + category.japanese + ')'}"></a>
					</td>
					<td class="text-center" th:text="#{'category.status.' + ${category.status}}">상태</td>
					<td class="text-right" th:text="${category.extProductNum + ' / ' + category.totalProductNum}"></td>
					<td th:text="${#dates.format(category.modifiedDate, 'MM월 dd일 (E) HH:mm:ss')}" class="text-center"></td>
				</tr>
			</tbody>
		</table>
	</th:block>
	<th:block th:if="${currentCategory != null}">
		<h2>Category</h2>
		<div class="row">
			<div class="col-xs-12">
				<select id="categorySelect" name="categorySelect" class="selectpicker" data-style="btn-success" data-size="10">
					<option th:each="category : ${categoryList}" th:text="${category.korean}" th:value="${category.id}" th:attr="data-subtext=${category.japanese}" th:selected="${category.id == currentCategory.id}">category</option>
				</select>
			</div>
		</div>
	</th:block>

	<th:block th:if="${page != null and page.content != null and makerList != null}">
		<h2 th:text="${'Maker [' + (session.selectsMaker != null ? #lists.size(session.selectsMaker) + '개 선택중' : 'All') + ']'}">Maker</h2>
		<div class="row">
			<div class="col-xs-12">
				<select id="makerSelect" name="makerSelect" class="selectpicker" data-style="btn-primary" data-selected-text-format="count > 3" data-count-selected-text="{0} 개의 메이커 선택중" multiple th:attr="data-current-category=${currentCategory.id}" th:title="${#lists.size(makerList) + '개  maker가 있습니다.'}" data-size="10">
					<option th:each="maker : ${makerList}" th:value="${maker.maker}" th:text="${maker.maker}" th:selected="${session.selectsMaker != null and #lists.contains(session.selectsMaker, maker.maker)}" th:attr="data-subtext=${maker.makerCount}">maker</option>
				</select>
			</div>
		</div>
		<br />
		
		<h2 th:text="${'Type' + (session.selectsType != null ? ' [' + #lists.size(session.selectsType) + '개 선택중]' : '')}">Type</h2>
		<div class="row">
			<div class="col-xs-12">
				<select id="typeSelect" name="typeSelect" class="selectpicker" data-selected-text-format="count > 3" data-style="btn-info" data-count-selected-text="{0} 개의 타입  선택중" multiple th:attr="data-current-category=${currentCategory.id}" th:title="${#lists.size(typeList) + '개  type이 있습니다.'}" data-size="10">
					<option th:each="type : ${typeList}" th:value="${type.type}" th:text="${type.type}" th:selected="${session.selectsType != null and #lists.contains(session.selectsType, type.type)}" th:attr="data-subtext=${type.typeCount}">type</option>
				</select>
			</div>
		</div>
		<br />
		
		
		<h2 th:text="${'Product' + (page != null and not #lists.isEmpty(page.content) ? ' [' + page.totalElements + ' 개 제품]' : '')}">Product</h2>

		<table id="product" class="table table-striped">
			<thead>
				<tr>
					<th>카테고리</th>
					<th>접수번호</th>
					<th>세리순</th>
					<th>메이커</th>
					<th>타입</th>
					<th>평가</th>
				</tr>
			</thead>
			<tbody>
				<tr th:if="${page != null and not #lists.isEmpty(page.content)}"
					th:each="p : ${page.content}"
					th:classappend="${product != null and product.uketsukeNo == p.uketsukeNo} ? 'currentProduct' : ''">
					<td
						th:text="${p.category.korean + '(' + p.category.japanese + ')'}"
						class="text-center"></td>
					<td class="text-center"><a
						th:href="@{/product/__${p.category.id}__/__${p.uketsukeNo}__(page=${page.number-1},size=${page.size})}"
						th:text="${p.uketsukeNo}" /></a></td>
					<td th:text="${p.seriBng}" class="text-center"></td>
					<td th:text="${p.maker}"></td>
					<td th:text="${p.type}" class="text-center"></td>
					<td th:text="${p.rating}" class="text-center"></td>
				</tr>
				<tr th:unless="${not #lists.isEmpty(page.content)}">
					<td colspan="6">No data.</td>
				</tr>
			</tbody>
		</table>
	</th:block>

</body>
</html>
